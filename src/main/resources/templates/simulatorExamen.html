<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Testing</title>
  <link rel="stylesheet" type="text/css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"   />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="container-fluid text-center">
  <div class="m-2">
    <a class="h3 m-2" th:href="@{http://localhost:8080}">Home</a>
  </div>
  <div class="h5 m-2">
    <span id="intrebarea">Textul Intrebarii este</span>
    <div></div>
<!--    <form id="chestionar">-->
<!--      <label for="varianta1"><span id="optiuneaa" > Varianta 1 este</span></label>-->
<!--      <input type="checkbox" id="varianta1" name="myBooleanInput1" value="true">-->
<!--      <label for="varianta2"><span id="optiuneab" > Varianta 2 este</span></label>-->
<!--      <input type="checkbox" id="varianta2" name="myBooleanInput2" value="true">-->
<!--      <label for="varianta3"><span id="optiuneac" > Varianta 3 este</span></label>-->
<!--      <input type="checkbox" id="varianta3" name="myBooleanInput3" value="true">-->
<!--      <button type="submit" id="next" onclick="submitForm()">Urmatoarea Intrebare</button>-->
<!--    </form>-->
    <form id="myForm" method="post" th:action="@{/submitForm}">
      <h4 th:text="${listIntrebari[index].intrebare}"></h4>
      <input type="checkbox" name="myBooleanInput1" th:checked="${listIntrebari[index].optiuneaabool}"/>
      <span th:text="${listIntrebari[index].optiuneaa}"></span>
      <br/>
      <input type="checkbox" name="myBooleanInput2" th:checked="${listIntrebari[index].optiuneabbool}"/>
      <span th:text="${listIntrebari[index].optiuneab}"></span>
      <br/>
      <input type="checkbox" name="myBooleanInput3" th:checked="${listIntrebari[index].optiuneacbool}"/>
      <span th:text="${listIntrebari[index].optiuneac}"></span>
      <br/><br/>
      <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>
</div>
<script type="text/javascript">
  function submitForm() {
    // Get the form data
    var formData = new FormData(document.getElementById("chestionar"));

    // Send the data to the server using AJAX
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/submitForm");
    xhr.send(formData);

    // Handle the response from the server (if any)
    xhr.onreadystatechange = function() {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {
          // Success! Do something with the response (if any)
        } else {
          // Error! Handle the error (if any)
        }
      }
    }
    myFunction()
  }
  function myFunction(textArray) {
    $.ajax({
      url: "/getTexts", // replace with the URL of your controller method
      type: "POST",
      data: JSON.stringify(textArray),
      contentType: "application/json",
      success: function(data) {
        // update each element with the corresponding text
        document.getElementById("intrebarea").innerHTML = data[0];
        document.getElementById("optiuneaa").innerText = data[1];
        document.getElementById("optiuneab").innerText = data[2];
        document.getElementById("optiuneac").innerText = data[3];
      }
    });
    intrebariTerminate++;
  }
</script>
</body>
</html>